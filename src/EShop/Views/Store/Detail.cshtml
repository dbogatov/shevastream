@* @model EShop.Models.Enitites.Product *@

@using Newtonsoft.Json;
@using Microsoft.AspNetCore.Http;

@* Model is a Entity.Product object *@

@{
	ViewData["Title"] = Model.Name;
}

@section styles {
	<link href="/lib/magnific-popup/dist/magnific-popup.css" rel="stylesheet">

	<meta name="keywords" content="@(Model.Name) купити купить">
	<meta name="description" content="@(Model.Description)">
}

<!-- Facebook Comments API -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
	var js, fjs = d.getElementsByTagName(s)[0];
	if (d.getElementById(id)) return;
	js = d.createElement(s); js.id = id;
	js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6";
	fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<!-- Google plus API -->
<script src="https://apis.google.com/js/platform.js" async defer>
  {lang: 'uk'}
</script>

<!-- VK API -->
<script type="text/javascript" src="//vk.com/js/api/openapi.js?122"></script>
<script type="text/javascript">
	VK.init({apiId: 5511170, onlyWidgets: true});
</script>
<script type="text/javascript" src="//vk.com/js/api/share.js?93" charset="windows-1251"></script>


@section heading {
	<!-- begin:heading -->
	<div class="heads" style="background: url(/images/bg.jpg) center center;">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<h2><span>//</span> @Model.Name</h2>
				</div>
			</div>
		</div>
	</div>
	<!-- end:heading -->
}

<!-- begin:content -->
<div class="page-content">
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<ol class="breadcrumb">
					<li><a asp-controller="Store" asp-action="Index">Головна</a></li>
					<li><a asp-controller="Store" asp-action="Product">Продукція</a></li>
					<li class="active">@Model.Name</li>
				</ol>
			</div>
		</div>

		<div class="row">
			<!-- begin:product-content -->
			<div class="col-md-9 col-sm-9 single-item">
				<div class="row">
					<div class="col-md-5 col-sm-5">
						<div class="row" style="text-align: right;">
							<div class="col-md-12 col-sm-12">
								<span style="color: #777">Натисніть на зображення для збільшення</span>
							</div>
						</div>
						<div id="itemsingle" class="carousel slide clearfix">
							
							<div class="carousel-inner gallery">
								@{ var active = "active"; }
								@foreach (var url in JsonConvert.DeserializeObject(Model.ImageUrls))
								{
									<div class="item @active">
										<img src="@url" alt="@(Model.Name)" class="img-rounded">
									</div>
									active = "";
								}
							</div>
							
							@{ 
								active = "active";
								var index = 0; 
							}
							@foreach (var url in JsonConvert.DeserializeObject(Model.ImageUrls))
							{
								@if (index % 3 == 0)
								{
									@:<ol class="carousel-indicators">
								}
								<li data-target="#itemsingle" data-slide-to="@index" class="@active"><img src="@url" class="img-responsive img-rounded" alt="@(Model.Name)"></li>
								@if ((index + 1) % 3 == 0)
								{
									@:</ol>
								}
								active = "";
								index++;
							}
							@if (index % 3 == 0)
							{
								@:</ol>
							}
						</div>
					</div>
					<div class="col-md-7 col-sm-7">
						<h3>@Model.Name</h3>
						<p>@Model.Description</p>
						<h4>@Model.Cost UAH</h4>
						<p>
							<a href="#" data-product="@Model.Id" class="btn btn-primary btn-large addToCartBtn"><i class="icon-shopping-cart"></i> Покласти у кошик</a>
							<a href="#" data-product="@Model.Id" class="btn btn-purple btn-large addToCartAndCheckoutBtn"><i class="icon-shopping-cart"></i> Покласти у кошик & Замовити</a>
						</p>
					</div>
				</div>

				<!-- begin:tab -->
				<div class="row">
					<div class="col-md-12 product-tabs">
						<ul id="myTab" class="nav nav-tabs">
							<li class="active"><a href="#info" data-toggle="tab">Характеристики</a></li>
							<li class=""><a href="#moreinfo" data-toggle="tab">Інформація</a></li>
							<li class=""><a href="#review" data-toggle="tab">Відгуки</a></li>
						</ul>
						<div id="myTabContent" class="tab-content">
							<div class="tab-pane fade active in" id="info">
								
								<ul>
									@foreach (var characteristic in JsonConvert.DeserializeObject(Model.Characteristics))
									{
										<li>@Html.Raw(characteristic)</li>
									}	
								</ul>
							</div>
							<div class="tab-pane fade" id="moreinfo">
								<p>@Html.Raw(Model.Information)</p>
							</div>
							<div class="tab-pane fade" id="review">
								<div class="fb-comments" id="fbcomment" data-href="https://shevastream.com/store/product/@(Model.Id)" data-width="700" data-numposts="5"></div>
							</div>
						</div>

					</div>
				</div>
				<!-- end:tab -->
					
			</div>
			
			
			
			<!-- end:product-content -->

			<!-- begin:product-sidebar -->
			<div class="col-md-3 col-sm-3">
				<div class="row sidebar">
					<div class="col-md-12">
						<h3>Інформація</h3>
						<ul class="nav nav-pills nav-stacked">
							<li><a asp-controller="Store" asp-action="FAQ">Оплата</a></li>
							<li><a asp-controller="Store" asp-action="FAQ">Доставка</a></li>
						</ul>
					</div>

					<div class="col-md-12">
						<h3>Social</h3>
						<ul class="nav social">
							<li><div class="fb-like" data-href="https://shevastream.com/store/product/@(Model.Id)" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></div></li>
							<li><div class="g-plusone" data-size="tall" data-annotation="inline" data-width="200"></div></li>
							<li>
								<div id="vk_like"></div>
								<script type="text/javascript">
									VK.Widgets.Like("vk_like", {type: "button", height: 24});
								</script>
							</li>
							<li>
								<script type="text/javascript"><!--
									document.write(VK.Share.button(false,{type: "round", text: "Share"}));
								--></script>
							</li>
						</ul>
					</div>
				</div>
			</div>
			<!-- end:product-sidebar -->

		</div>
		
		@if ((bool)JsonConvert.DeserializeObject(Model.VideoData).HasVideo)
		{
			<div style="height: 30px;"></div>
					
			<div class="row">
				<div class="col-md-12">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">Промо-відео</h3>
						</div>
						<div class="panel-body" style="padding: 0px;">
							<div class="embed-responsive embed-responsive-16by9">
								<iframe class="embed-responsive-item" width="560" height="315" src="@JsonConvert.DeserializeObject(Model.VideoData).Url" allowfullscreen></iframe>
							</div>
						</div>
					</div>
				</div>
			</div>
		}
	</div>
</div>
<!-- end:content -->

<!-- structured data -->
<script type="application/ld+json">
{
	"@@context": "http://schema.org",
	"@@type": "Product",
	"description": "@(Model.Description)",
	"name": "@(Model.Name)",
	"offers": {
		"@@type": "Offer",
		"availability": "http://schema.org/InStock",
		"price": "@(Model.Cost)",
		"priceCurrency": "UAH"
	},
	"image": "@( ((Newtonsoft.Json.Linq.JArray)JsonConvert.DeserializeObject(Model.ImageUrls)).ToObject<string[]>()[0] )"
}
</script>

@section scripts {
	
	
	<!--<script src="/js/detail.js"></script>-->
	
	<script>
		var globalActive = "Detail";
	</script>
	
}