function updateCartNumber(){var t=null==$.cookie("Cart")?0:JSON.parse($.cookie("Cart")).Elements.length;t>0&&$("#cartItemsNumber").text("("+t+")")}function updateCartButtons(){var t=parseInt($(".addToCartBtn").data("product")),e=null==$.cookie("Cart")?!1:JSON.parse($.cookie("Cart")).Elements.filter(function(e){return e.ProductId==t}).length>0;e&&($(".addToCartBtn").text("Вже у кошику"),$(".addToCartBtn").addClass("disabled"),$(".addToCartBtn").off("click","**"),$(".addToCartAndCheckoutBtn").text("Замовити"),$(".addToCartAndCheckoutBtn").off("click","**"),$(".addToCartAndCheckoutBtn").click(function(){location.href="/Store/Cart"}))}function fixFooter(){$("body").height()<$(window.top).height()&&$("#footerFix").height($(window.top).height()-$("body").height())}function registerCallMeBack(){$("#callMeBackModal").on("shown.bs.modal",function(){$("#callBackPhone").focus()}),$("#callMeBackModal").on("hidden.bs.modal",function(){$("#callBackPhone").val(""),$("#requestCallBackBody").show(),$("#confirmCallBackBtn").show(),$("#responseCallBackBody").hide()}),$("#callBackPhone").mask("(999) 999-9999"),$("#confirmCallBackBtn").click(function(){if(0!==$("#callBackPhone").val().length){var t={Phone:$("#callBackPhone").val()};$.post("/api/Feedback/CallMeBack",t,function(){$("#confirmCallBackBtn").hide(),$("#requestCallBackBody").hide(),$("#responseCallBackBody").show()})}})}function savePost(t,e){var a=$("#title").val().trim(),n=$("#content").val().trim();(0==a.length||0==n.length)&&alert("Fields may not be empty"),e>-1?(Blog.changePost(e,a,n),t?Blog.setCallback(function(){location.href="/Blog/"+$("#data").data("url")}).publishPost(e):Blog.setCallback(function(){alert("Saved.")}).unpublishPost(e)):Blog.setCallback(function(e){t&&e.length>0?location.href="/Blog/"+e:0==e.length?alert("Choose different title"):location.href="/Blog/Edit/"+e}).createPost(a,n,t)}function removePost(t){Blog.setCallback(function(){location.href="/Blog"}).removePost(t)}var Blog=function(){var t=null,e=function(e){$(document).trigger("eshop.blogupdated"),null!=t&&(t(e),t=null)};return{setCallback:function(e){return t=e,this},createPost:function(t,a,n){var o={Active:n,Title:t,Content:a};$.put("/api/Blog",o,function(t){t?e(t):alert("Choose another name")})},getHtml:function(t){var a={Content:t};$.get("/api/Blog/GetHtml",a,function(t){e(t)})},changePost:function(t,a,n){var o={Id:t,Title:a,Content:n};$.post("/api/Blog",o,function(t){e()})},publishPost:function(t){var a={Id:t};$.post("/api/Blog/Activate",a,function(t){e()})},unpublishPost:function(t){var a={Id:t};$.post("/api/Blog/Deactivate",a,function(t){e()})},removePost:function(t){var a={Id:t};$["delete"]("/api/Blog",a,function(t){e()})}}}(),Cart=function(){var t=null,e=function(){$(document).trigger("eshop.cartupdated"),null!=t&&(t(),t=null)};return{setCallback:function(e){return t=e,this},addItem:function(t,a){var n={ProductId:t,Quantity:a};$.put("/api/Cart",n).always(function(){e()})},getItems:function(){$.get("/api/Cart",{},function(t){e()})},changeItem:function(t,a){var n={ProductId:t,Quantity:a};$.post("/api/Cart",n,function(t){e()})},removeItem:function(t){var a={ProductId:t};$["delete"]("/api/Cart",a,function(t){e()})}}}();$(document).ready(function(){updateCartNumber()}),$(document).on("eshop.cartupdated",function(){updateCartNumber()}),$(document).ready(function(){$("#feedback").on("submit",function(t){t.preventDefault();var e=!0;if($("input,textarea,select").filter("[required]:visible").each(function(){e=e&&$(this).val().length>0}),e){$("#feadbackValidationAlert").hide();var a={Email:$("[name='email']").val(),Subject:$("[name='subject']").val(),Body:$("[name='message']").val(),Name:$("[name='name']").val()};$.post("/api/Feedback",a,function(){$("#feadbackValidationSuccess").show(),$("#feedback").find("input[type=text], input[type=email], textarea").val("")})}else $("#feadbackValidationAlert").show()})}),$(document).ready(function(){$(".gallery img").each(function(){$(this).attr("data-mfp-src",$(this).attr("src"))}),$(".gallery img").magnificPopup({gallery:{enabled:!0},type:"image"}),$(".addToCartBtn").click(function(){Cart.addItem($(this).data("product"),1)}),$(".addToCartAndCheckoutBtn").click(function(){Cart.setCallback(function(){location.href="/Store/Cart"}).addItem($(this).data("product"),1)})}),$(document).ready(function(){updateCartButtons()}),$(document).on("eshop.cartupdated",function(){updateCartButtons()}),$(document).ready(function(){$("#addressGroup").hide();var t=$.cookie("UserOrderData");if(null!=t){var e=JSON.parse(t);$("[name='CustomerName']").val(e.Name),$("[name='CustomerEmail']").val(e.Email),$("[name='CustomerPhone']").val(e.Phone),$("[name='Address']").val(e.Address)}$("[name='CustomerPhone']").mask("(999) 999-9999"),$("[name='ShipmentMethodId']").change(function(){"1"!==$(this).val()?$("#addressGroup").show():$("#addressGroup").hide()}),$("form").submit(function(){return $("#submitBtn").attr("disabled","disabled"),$("#submitBtn").text("Завантаження..."),!0})}),$(document).ready(function(){$("#slider").carousel({interval:5e3}),$("#testi").carousel({interval:4e3}),$("#itemsingle").carousel({interval:!1})}),$(document).ready(function(){$("#"+globalActive).addClass("active"),registerCallMeBack(),$("[href='#']").click(function(t){t.preventDefault()})}),$(document).ready(fixFooter),$(window).resize(fixFooter),jQuery.each(["put","delete"],function(t,e){jQuery[e]=function(t,a,n,o){return jQuery.isFunction(a)&&(o=o||n,n=a,a=void 0),jQuery.ajax({url:t,type:e,dataType:o,data:a,success:n})}}),$(document).ready(function(){var t=-1;void 0!==$("#data").data("post")&&(t=parseInt($("#data").data("post"))),$("#publishBtn").click(function(){savePost(!0,t)}),$("#draftBtn").click(function(){savePost(!1,t)}),$("#removeBtn").click(function(){removePost(t)})});